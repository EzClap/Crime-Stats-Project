{"ast":null,"code":"import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nimport Main from \"./main\";\nvar jwt = null;\nexport var RegAcc = function RegAcc(emailinput, passcodeinput) {\n  fetch(\"https://cab230.hackhouse.sh/register\", {\n    method: \"POST\",\n    body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\"\n    }\n  }).then(function (response) {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(\"Network response was not ok\");\n  }).then(function (result) {\n    var queryDiv = document.getElementById(\"query\");\n    queryDiv.innerHTML = JSON.stringify(result);\n    RegAcc.disabled = true;\n  }).catch(function (error) {\n    console.log(\"There has been a problem with your fetch operation: \", error.message);\n  });\n};\nexport var LoginAcc = function LoginAcc(emailinput, passcodeinput) {\n  fetch(\"https://cab230.hackhouse.sh/login\", {\n    method: \"POST\",\n    body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\"\n    },\n    redirect: \"follow\"\n  }).then(function (response) {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(\"Network response was not ok.\");\n  }).then(function (result) {\n    var queryDiv = document.getElementById(\"query\");\n    queryDiv.innerHTML = JSON.stringify(result);\n    jwt = result.token;\n    sessionStorage.setItem(\"token\", result.token); // SetToken(result.token);\n  }).catch(function (error) {\n    console.log(\"There has been a problem with your fetch operation: \", error.message);\n  });\n};\n\nfunction GetSearchResult(itemsearch) {\n  var key = sessionStorage.getItem(\"token\");\n  var getParam = {\n    method: \"GET\"\n  };\n  var head = {\n    Authorization: \"Bearer \".concat(key)\n  };\n  getParam.headers = head;\n  var baseUrl = \"https://cab230.hackhouse.sh/search?\";\n  var query = \"offence=\" + itemsearch;\n  var filter = \"area=Moreton Bay Regional Council\";\n  var url = baseUrl + query + \"&\" + filter;\n  return fetch(encodeURI(url), getParam).then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    return res.result;\n  }).then(function (result) {\n    return result.map(function (off) {\n      return {\n        LGA: off.LGA,\n        total: off.total\n      };\n    });\n  });\n}","map":{"version":3,"sources":["/Users/jackhu/Downloads/crime/src/api.js"],"names":["React","ReactDOM","useState","useEffect","Main","jwt","RegAcc","emailinput","passcodeinput","fetch","method","body","headers","then","response","ok","json","Error","result","queryDiv","document","getElementById","innerHTML","JSON","stringify","disabled","catch","error","console","log","message","LoginAcc","redirect","token","sessionStorage","setItem","GetSearchResult","itemsearch","key","getItem","getParam","head","Authorization","baseUrl","query","filter","url","encodeURI","res","map","off","LGA","total"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nimport Main from \"./main\";\n\n\nlet jwt = null;\nexport const RegAcc = (emailinput, passcodeinput) => {\n    fetch(\"https://cab230.hackhouse.sh/register\", {\n        method: \"POST\",\n        body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n        headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n    })\n        .then(function (response) {\n            if (response.ok) {\n                return response.json();\n            }\n            throw new Error(\"Network response was not ok\");\n        })\n        .then(function (result) {\n            let queryDiv = document.getElementById(\"query\");\n            queryDiv.innerHTML = JSON.stringify(result);\n            RegAcc.disabled = true;\n\n        })\n        .catch(function (error) {\n            console.log(\n                \"There has been a problem with your fetch operation: \",\n                error.message\n            );\n        });\n}\n\nexport const LoginAcc = (emailinput, passcodeinput) => {\n    fetch(\"https://cab230.hackhouse.sh/login\", {\n        method: \"POST\",\n        body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n        headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n        redirect: \"follow\",\n    })\n        .then(function (response) {\n            if (response.ok) {\n                return response.json();\n            }\n            throw new Error(\"Network response was not ok.\");\n        })\n\n        .then(function (result) {\n            let queryDiv = document.getElementById(\"query\");\n            queryDiv.innerHTML = JSON.stringify(result);\n            jwt = result.token;\n            sessionStorage.setItem(\"token\", result.token);\n            // SetToken(result.token);\n        })\n        .catch(function (error) {\n            console.log(\n                \"There has been a problem with your fetch operation: \",\n                error.message\n            );\n        });\n}\n\n\nfunction GetSearchResult(itemsearch) {\n\n    let key = sessionStorage.getItem(\"token\");\n    let getParam = { method: \"GET\" };\n    let head = { Authorization: `Bearer ${key}` };\n    getParam.headers = head;\n\n    const baseUrl = \"https://cab230.hackhouse.sh/search?\";\n    const query = \"offence=\" + itemsearch;\n    const filter = \"area=Moreton Bay Regional Council\";\n\n    const url = baseUrl + query + \"&\" + filter;\n\n    return fetch(encodeURI(url), getParam)\n        .then(res => res.json())\n        .then(res => res.result)\n        .then(result => result.map(off => ({\n            LGA: off.LGA,\n            total: off.total\n          }))\n        );\n\n}"]},"metadata":{},"sourceType":"module"}