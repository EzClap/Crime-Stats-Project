{"ast":null,"code":"import _slicedToArray from \"/Users/jackhu/Downloads/crime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jackhu/Downloads/crime/src/search.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nexport function SearchBar(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerSearch = _useState2[0],\n      SetInnerSearch = _useState2[1];\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    \"aria-labelledby\": \"search-button\",\n    name: \"search\",\n    id: \"search\",\n    type: \"search\",\n    value: innerSearch,\n    onChange: function onChange(e) {\n      return SetInnerSearch(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    id: \"search-button\",\n    type: \"button\",\n    onClick: function onClick() {\n      return props.onSubmit(innerSearch);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, \"Search\"));\n}\n\nfunction OpenSource() {\n  var url = \"https://cab230.hackhouse.sh/offences\";\n  return fetch(url).then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    return res.offences;\n  });\n}\n\nfunction GetSearchResult(itemsearch) {\n  var key = sessionStorage.getItem(\"token\");\n  var getParam = {\n    method: \"GET\"\n  };\n  var head = {\n    Authorization: \"Bearer \".concat(key)\n  };\n  getParam.headers = head;\n  var baseUrl = \"https://cab230.hackhouse.sh/search?\";\n  var query = \"offence=\" + itemsearch;\n  var filter = \"area=Moreton Bay Regional Council\";\n  var url = baseUrl + query + \"&\" + filter;\n  console.log(typeof search);\n\n  if (itemsearch !== null || itemsearch !== \"\") {\n    return fetch(encodeURI(url), getParam).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      return res.result;\n    }).then(function (result) {\n      return result.map(function (off) {\n        return {\n          LGA: off.LGA,\n          total: off.total\n        };\n      });\n    });\n  } else {\n    url = \"https://cab230.hackhouse.sh/offences\";\n    console.log(url);\n    return fetch(url).then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      return res.offences;\n    });\n  }\n}\n\nexport function useSearch(itemsearch) {\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searching = _useState4[0],\n      SetSearching = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      offences = _useState6[0],\n      SetOffence = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Serror = _useState8[0],\n      setError = _useState8[1];\n\n  if (itemsearch != null) {\n    useEffect(function () {\n      GetSearchResult(itemsearch).then(function (offences) {\n        SetOffence(offences);\n        SetSearching(false);\n      }).catch(function (e) {\n        setError(e);\n        SetSearching(false);\n      });\n    }, [itemsearch]);\n  } else {\n    useEffect(function () {\n      GetSearchResult(itemsearch).then(function (offences) {\n        SetOffence(offences);\n        SetSearching(false);\n      }).catch(function (e) {\n        setError(e);\n        SetSearching(false);\n      });\n    }, []);\n  }\n\n  return {\n    searching: searching,\n    offences: offences,\n    Serror: Serror\n  };\n}","map":{"version":3,"sources":["/Users/jackhu/Downloads/crime/src/search.js"],"names":["React","ReactDOM","useState","useEffect","SearchBar","props","innerSearch","SetInnerSearch","e","target","value","onSubmit","OpenSource","url","fetch","then","res","json","offences","GetSearchResult","itemsearch","key","sessionStorage","getItem","getParam","method","head","Authorization","headers","baseUrl","query","filter","console","log","search","encodeURI","result","map","off","LGA","total","useSearch","searching","SetSearching","SetOffence","Serror","setError","catch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\n\n\nexport function SearchBar(props) {\n\n    const [innerSearch, SetInnerSearch] = useState(\"\");\n\n    return (\n        <div>\n            <input\n                aria-labelledby=\"search-button\"\n                name=\"search\"\n                id=\"search\"\n                type=\"search\"\n                value={innerSearch}\n                onChange={(e) => SetInnerSearch(e.target.value)}\n            />\n            <button id=\"search-button\" type=\"button\" onClick={() => props.onSubmit(innerSearch)}>\n                Search\n            </button>\n        </div>\n    );\n}\n\n\nfunction OpenSource() {\n    const url = \"https://cab230.hackhouse.sh/offences\"\n    return fetch(url)\n        .then((res) => res.json())\n        .then((res) => res.offences)\n}\n\nfunction GetSearchResult(itemsearch) {\n\n    let key = sessionStorage.getItem(\"token\");\n    let getParam = { method: \"GET\" };\n    let head = { Authorization: `Bearer ${key}` };\n    getParam.headers = head;\n\n    const baseUrl = \"https://cab230.hackhouse.sh/search?\";\n\n\n    const query = \"offence=\" + itemsearch;\n\n    const filter = \"area=Moreton Bay Regional Council\";\n\n    let url = baseUrl + query + \"&\" + filter;\n    console.log(typeof search)\n    if (itemsearch !== null || itemsearch !== \"\") {\n        return fetch(encodeURI(url), getParam)\n            .then(res => res.json())\n            .then(res => res.result)\n            .then(result => result.map(off => ({\n                LGA: off.LGA,\n                total: off.total\n            }))\n            );\n    }\n    else {\n        url = \"https://cab230.hackhouse.sh/offences\"\n        console.log(url)\n        return fetch(url)\n            .then((res) => res.json())\n            .then((res) => res.offences)\n    }\n}\n\nexport function useSearch(itemsearch) {\n    const [searching, SetSearching] = useState(true);\n    const [offences, SetOffence] = useState([]);\n    const [Serror, setError] = useState(null);\n    if (itemsearch != null) {\n        useEffect(() => {\n            GetSearchResult(itemsearch).then(offences => {\n                SetOffence(offences);\n                SetSearching(false);\n            }).catch((e) => {\n                setError(e);\n                SetSearching(false);\n            });\n        }, [itemsearch]);\n    }\n    else {\n        useEffect(() => {\n            GetSearchResult(itemsearch).then((offences) => {\n                SetOffence(offences);\n                SetSearching(false);\n            }).catch((e) => {\n                setError(e);\n                SetSearching(false);\n            })\n        }, []);\n    }\n\n    return {\n        searching,\n        offences,\n        Serror,\n    };\n}"]},"metadata":{},"sourceType":"module"}