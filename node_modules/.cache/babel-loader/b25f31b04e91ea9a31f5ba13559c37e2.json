{"ast":null,"code":"import _slicedToArray from \"/Users/jackhu/Downloads/crime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jackhu/Downloads/crime/src/search.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nexport function SearchBar(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      offSearch = _useState2[0],\n      SetOffSearch = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lgasearch = _useState4[0],\n      SetLgaSearch = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      ageParam = _useState6[0],\n      SetAgeParam = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sexParam = _useState8[0],\n      SetSexParam = _useState8[1];\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    \"aria-labelledby\": \"offence-input\",\n    name: \"offence\",\n    id: \"offence\",\n    type: \"offence\",\n    placeholder: \"Search Offences\",\n    value: offSearch,\n    onChange: function onChange(e) {\n      return SetOffSearch(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    \"aria-labelledby\": \"lga-input\",\n    name: \"lga\",\n    id: \"lga\",\n    type: \"lga\",\n    placeholder: \"Search Location\",\n    value: lgasearch,\n    onChange: function onChange(e) {\n      return SetLgaSearch(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    className: \"age-option\",\n    id: \"age\",\n    value: ageParam,\n    onChange: function onChange(e) {\n      return SetAgeParam(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"Adult\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Adult\"), React.createElement(\"option\", {\n    value: \"Juvenile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Juvenile\")), React.createElement(\"select\", {\n    className: \"sex-option\",\n    id: \"sex\",\n    value: sexParam,\n    onChange: function onChange(e) {\n      return SetSexParam(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"Male\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Male\"), React.createElement(\"option\", {\n    value: \"Female\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Female\")), React.createElement(\"button\", {\n    id: \"search-button\",\n    type: \"button\",\n    onClick: function onClick() {\n      return props.onSubmit(offSearch, lgasearch, ageParam, sexParam);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Search\"));\n}\n\nfunction GetSearchResult(itemsearch, lga, age, sex) {\n  var key = sessionStorage.getItem(\"token\");\n  var getParam = {\n    method: \"GET\"\n  };\n  var head = {\n    Authorization: \"Bearer \".concat(key)\n  };\n  getParam.headers = head;\n  var baseUrl = \"https://cab230.hackhouse.sh/search?\";\n  var query = \"offence=\" + itemsearch;\n  var filterlga = \"area=\" + lga;\n  var filterage = \"age=\" + age;\n  var filtersex = \"sex=\" + sex;\n  var url = baseUrl + query + \"&\" + filterlga + \"&\" + filterage + \"&\" + filtersex;\n  return fetch(encodeURI(url), getParam).then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    return res.result;\n  }).then(function (result) {\n    return result.map(function (off) {\n      return {\n        LGA: off.LGA,\n        total: off.total\n      };\n    });\n  });\n}\n\nexport function useSearch(itemsearch, lga, age, sex) {\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      searching = _useState10[0],\n      SetSearching = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      offences = _useState12[0],\n      SetOffence = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      Serror = _useState14[0],\n      setError = _useState14[1];\n\n  useEffect(function () {\n    GetSearchResult(itemsearch, lga, age, sex).then(function (offences) {\n      SetOffence(offences);\n      SetSearching(false);\n    }).catch(function (e) {\n      setError(e);\n      SetSearching(false);\n    });\n  }, [itemsearch]);\n  return {\n    searching: searching,\n    offences: offences,\n    Serror: Serror\n  };\n}","map":{"version":3,"sources":["/Users/jackhu/Downloads/crime/src/search.js"],"names":["React","ReactDOM","useState","useEffect","SearchBar","props","offSearch","SetOffSearch","lgasearch","SetLgaSearch","ageParam","SetAgeParam","sexParam","SetSexParam","e","target","value","onSubmit","GetSearchResult","itemsearch","lga","age","sex","key","sessionStorage","getItem","getParam","method","head","Authorization","headers","baseUrl","query","filterlga","filterage","filtersex","url","fetch","encodeURI","then","res","json","result","map","off","LGA","total","useSearch","searching","SetSearching","offences","SetOffence","Serror","setError","catch"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAGA,OAAO,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA,kBAEKH,QAAQ,CAAC,EAAD,CAFb;AAAA;AAAA,MAEtBI,SAFsB;AAAA,MAEXC,YAFW;;AAAA,mBAGKL,QAAQ,CAAC,EAAD,CAHb;AAAA;AAAA,MAGtBM,SAHsB;AAAA,MAGXC,YAHW;;AAAA,mBAIGP,QAAQ,CAAC,EAAD,CAJX;AAAA;AAAA,MAItBQ,QAJsB;AAAA,MAIZC,WAJY;;AAAA,mBAKGT,QAAQ,CAAC,EAAD,CALX;AAAA;AAAA,MAKtBU,QALsB;AAAA,MAKZC,WALY;;AAO7B,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,uBAAgB,eADpB;AAEI,IAAA,IAAI,EAAC,SAFT;AAGI,IAAA,EAAE,EAAC,SAHP;AAII,IAAA,IAAI,EAAC,SAJT;AAKI,IAAA,WAAW,EAAC,iBALhB;AAMI,IAAA,KAAK,EAAEP,SANX;AAOI,IAAA,QAAQ,EAAE,kBAACQ,CAAD;AAAA,aAAOP,YAAY,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAAnB;AAAA,KAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAUI;AACI,uBAAgB,WADpB;AAEI,IAAA,IAAI,EAAC,KAFT;AAGI,IAAA,EAAE,EAAC,KAHP;AAII,IAAA,IAAI,EAAC,KAJT;AAKI,IAAA,WAAW,EAAC,iBALhB;AAMI,IAAA,KAAK,EAAER,SANX;AAOI,IAAA,QAAQ,EAAE,kBAACM,CAAD;AAAA,aAAOL,YAAY,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAnB;AAAA,KAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,EAmBI;AAAQ,IAAA,SAAS,EAAC,YAAlB;AAA+B,IAAA,EAAE,EAAC,KAAlC;AAAwC,IAAA,KAAK,EAAEN,QAA/C;AAAyD,IAAA,QAAQ,EAAE,kBAACI,CAAD;AAAA,aAAOH,WAAW,CAACG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AAAA,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,EAEI;AAAQ,IAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CAnBJ,EAwBI;AAAQ,IAAA,SAAS,EAAC,YAAlB;AAA+B,IAAA,EAAE,EAAC,KAAlC;AAAwC,IAAA,KAAK,EAAEJ,QAA/C;AAAyD,IAAA,QAAQ,EAAE,kBAACE,CAAD;AAAA,aAAOD,WAAW,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AAAA,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAEI;AAAQ,IAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CAxBJ,EA6BI;AAAQ,IAAA,EAAE,EAAC,eAAX;AAA2B,IAAA,IAAI,EAAC,QAAhC;AAAyC,IAAA,OAAO,EAAE;AAAA,aAAMX,KAAK,CAACY,QAAN,CAAeX,SAAf,EAAyBE,SAAzB,EAAmCE,QAAnC,EAA4CE,QAA5C,CAAN;AAAA,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA7BJ,CADJ;AAmCH;;AAED,SAASM,eAAT,CAAyBC,UAAzB,EAAoCC,GAApC,EAAwCC,GAAxC,EAA4CC,GAA5C,EAAiD;AAE7C,MAAIC,GAAG,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAV;AACA,MAAIC,QAAQ,GAAG;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAAf;AACA,MAAIC,IAAI,GAAG;AAAEC,IAAAA,aAAa,mBAAYN,GAAZ;AAAf,GAAX;AACAG,EAAAA,QAAQ,CAACI,OAAT,GAAmBF,IAAnB;AAEA,MAAMG,OAAO,GAAG,qCAAhB;AACA,MAAMC,KAAK,GAAG,aAAab,UAA3B;AACA,MAAMc,SAAS,GAAG,UAAUb,GAA5B;AACA,MAAMc,SAAS,GAAG,SAASb,GAA3B;AACA,MAAMc,SAAS,GAAG,SAASb,GAA3B;AAEA,MAAIc,GAAG,GAAGL,OAAO,GAAGC,KAAV,GAAkB,GAAlB,GAAwBC,SAAxB,GAAmC,GAAnC,GAAyCC,SAAzC,GAAqD,GAArD,GAA2DC,SAArE;AACA,SAAOE,KAAK,CAACC,SAAS,CAACF,GAAD,CAAV,EAAiBV,QAAjB,CAAL,CACFa,IADE,CACG,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GADN,EAEFF,IAFE,CAEG,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACE,MAAR;AAAA,GAFN,EAGFH,IAHE,CAGG,UAAAG,MAAM;AAAA,WAAIA,MAAM,CAACC,GAAP,CAAW,UAAAC,GAAG;AAAA,aAAK;AAC/BC,QAAAA,GAAG,EAAED,GAAG,CAACC,GADsB;AAE/BC,QAAAA,KAAK,EAAEF,GAAG,CAACE;AAFoB,OAAL;AAAA,KAAd,CAAJ;AAAA,GAHT,CAAP;AAQH;;AAED,OAAO,SAASC,SAAT,CAAmB5B,UAAnB,EAA8BC,GAA9B,EAAkCC,GAAlC,EAAsCC,GAAtC,EAA2C;AAAA,mBACZpB,QAAQ,CAAC,IAAD,CADI;AAAA;AAAA,MACvC8C,SADuC;AAAA,MAC5BC,YAD4B;;AAAA,oBAEf/C,QAAQ,CAAC,EAAD,CAFO;AAAA;AAAA,MAEvCgD,QAFuC;AAAA,MAE7BC,UAF6B;;AAAA,oBAGnBjD,QAAQ,CAAC,IAAD,CAHW;AAAA;AAAA,MAGvCkD,MAHuC;AAAA,MAG/BC,QAH+B;;AAK9ClD,EAAAA,SAAS,CAAC,YAAM;AACZe,IAAAA,eAAe,CAACC,UAAD,EAAYC,GAAZ,EAAgBC,GAAhB,EAAoBC,GAApB,CAAf,CAAwCiB,IAAxC,CAA6C,UAAAW,QAAQ,EAAI;AACrDC,MAAAA,UAAU,CAACD,QAAD,CAAV;AACAD,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAHD,EAGGK,KAHH,CAGS,UAACxC,CAAD,EAAO;AACZuC,MAAAA,QAAQ,CAACvC,CAAD,CAAR;AACAmC,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAND;AAOH,GARQ,EAQN,CAAC9B,UAAD,CARM,CAAT;AAUA,SAAO;AACH6B,IAAAA,SAAS,EAATA,SADG;AAEHE,IAAAA,QAAQ,EAARA,QAFG;AAGHE,IAAAA,MAAM,EAANA;AAHG,GAAP;AAKH","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\n\n\nexport function SearchBar(props) {\n\n    const [offSearch, SetOffSearch] = useState(\"\");\n    const [lgasearch, SetLgaSearch] = useState(\"\");\n    const [ageParam, SetAgeParam] = useState(\"\");\n    const [sexParam, SetSexParam] = useState(\"\");\n\n    return (\n        <div>\n            <input\n                aria-labelledby=\"offence-input\"\n                name=\"offence\"\n                id=\"offence\"\n                type=\"offence\"\n                placeholder=\"Search Offences\"\n                value={offSearch}\n                onChange={(e) => SetOffSearch(e.target.value)}\n            />\n            <input\n                aria-labelledby=\"lga-input\"\n                name=\"lga\"\n                id=\"lga\"\n                type=\"lga\"\n                placeholder=\"Search Location\"\n                value={lgasearch}\n                onChange={(e) => SetLgaSearch(e.target.value)}\n            />\n            <select className=\"age-option\" id=\"age\" value={ageParam} onChange={(e) => SetAgeParam(e.target.value)}>\n                <option value=\"Adult\">Adult</option>\n                <option value=\"Juvenile\">Juvenile</option>\n            </select>\n\n            <select className=\"sex-option\" id=\"sex\" value={sexParam} onChange={(e) => SetSexParam(e.target.value)}>\n                <option value=\"Male\">Male</option>\n                <option value=\"Female\">Female</option>\n            </select>\n\n            <button id=\"search-button\" type=\"button\" onClick={() => props.onSubmit(offSearch,lgasearch,ageParam,sexParam)}>\n                Search\n            </button>\n        </div>\n    );\n}\n\nfunction GetSearchResult(itemsearch,lga,age,sex) {\n\n    let key = sessionStorage.getItem(\"token\");\n    let getParam = { method: \"GET\" };\n    let head = { Authorization: `Bearer ${key}` };\n    getParam.headers = head;\n\n    const baseUrl = \"https://cab230.hackhouse.sh/search?\";\n    const query = \"offence=\" + itemsearch;\n    const filterlga = \"area=\" + lga;\n    const filterage = \"age=\" + age;\n    const filtersex = \"sex=\" + sex;\n\n    let url = baseUrl + query + \"&\" + filterlga +\"&\" + filterage + \"&\" + filtersex;\n    return fetch(encodeURI(url), getParam)\n        .then(res => res.json())\n        .then(res => res.result)\n        .then(result => result.map(off => ({\n            LGA: off.LGA,\n            total: off.total\n        }))\n        );\n}\n\nexport function useSearch(itemsearch,lga,age,sex) {\n    const [searching, SetSearching] = useState(true);\n    const [offences, SetOffence] = useState([]);\n    const [Serror, setError] = useState(null);\n\n    useEffect(() => {\n        GetSearchResult(itemsearch,lga,age,sex).then(offences => {\n            SetOffence(offences);\n            SetSearching(false);\n        }).catch((e) => {\n            setError(e);\n            SetSearching(false);\n        });\n    }, [itemsearch]);\n\n    return {\n        searching,\n        offences,\n        Serror,\n    };\n}"]},"metadata":{},"sourceType":"module"}