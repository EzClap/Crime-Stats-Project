{"ast":null,"code":"import _slicedToArray from \"/Users/jackhu/Downloads/crime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jackhu/Downloads/crime/src/api.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nimport Main from \"./main\"; // import {setGlobal, useGlobal} from \"react\";\n// setGlobal({\n//     jwt: null\n// });\n\nvar jwt = null;\nexport var RegAcc = function RegAcc(emailinput, passcodeinput) {\n  fetch(\"https://cab230.hackhouse.sh/register\", {\n    method: \"POST\",\n    body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\"\n    }\n  }).then(function (response) {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(\"Network response was not ok\");\n  }).then(function (result) {\n    var queryDiv = document.getElementById(\"query\");\n    queryDiv.innerHTML = JSON.stringify(result);\n    RegAcc.disabled = true;\n  }).catch(function (error) {\n    console.log(\"There has been a problem with your fetch operation: \", error.message);\n  });\n};\nexport var LoginAcc = function LoginAcc(emailinput, passcodeinput) {\n  // const [jwt, setjwt] = useGlobal();\n  fetch(\"https://cab230.hackhouse.sh/login\", {\n    method: \"POST\",\n    body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\"\n    },\n    redirect: \"follow\"\n  }).then(function (response) {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(\"Network response was not ok.\");\n  }).then(function (result) {\n    var queryDiv = document.getElementById(\"query\");\n    queryDiv.innerHTML = JSON.stringify(result);\n    jwt = result.token; // SetToken(result.token);\n  }).catch(function (error) {\n    console.log(\"There has been a problem with your fetch operation: \", error.message);\n  });\n};\nexport function SearchBar(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerSearch = _useState2[0],\n      SetInnerSearch = _useState2[1];\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    \"aria-labelledby\": \"search-button\",\n    name: \"search\",\n    id: \"search\",\n    type: \"search\",\n    value: innerSearch,\n    onChange: function onChange(e) {\n      return SetInnerSearch(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    id: \"search-button\",\n    type: \"button\",\n    onClick: function onClick() {\n      return props.onSubmit(innerSearch);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Search\"));\n}\n\nfunction GetSearchResult(itemsearch) {\n  var getParam = {\n    method: \"GET\"\n  };\n  var head = {\n    Authorization: \"Bearer \".concat(jwt)\n  };\n  getParam.headers = head;\n  var baseUrl = \"https://cab230.hackhouse.sh/search?\";\n  var query = \"offence=\" + itemsearch;\n  var filter = \"area=Moreton Bay Regional Council\";\n  var url = baseUrl + query + \"&\" + filter; // const testurl = `https://newsapi.org/v2/top-headlines?country=us&apiKey=9b31b2cc112849a4b433d048f54a15f8&q=${itemsearch}`\n\n  return fetch(encodeURI(url), getParam) // return fetch(testurl)\n  .then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    return res.articles;\n  }).then(function (articles) {\n    return articles.map(function (result) {\n      return {\n        LGA: result.LGA,\n        total: result.total // title: result.title,\n        // url: result.url\n\n      };\n    });\n  });\n}\n\nexport function useSearch(itemsearch) {\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searching = _useState4[0],\n      SetSearching = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      offences = _useState6[0],\n      SetOffence = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Serror = _useState8[0],\n      setError = _useState8[1];\n\n  useEffect(function () {\n    GetSearchResult(itemsearch).then(function (offences) {\n      SetOffence(offences);\n      SetSearching(false);\n    }).catch(function (e) {\n      setError(e);\n      SetSearching(false);\n    });\n  }, [itemsearch]);\n  return {\n    searching: searching,\n    offences: offences,\n    Serror: Serror\n  };\n}","map":{"version":3,"sources":["/Users/jackhu/Downloads/crime/src/api.js"],"names":["React","ReactDOM","useState","useEffect","Main","jwt","RegAcc","emailinput","passcodeinput","fetch","method","body","headers","then","response","ok","json","Error","result","queryDiv","document","getElementById","innerHTML","JSON","stringify","disabled","catch","error","console","log","message","LoginAcc","redirect","token","SearchBar","props","innerSearch","SetInnerSearch","e","target","value","onSubmit","GetSearchResult","itemsearch","getParam","head","Authorization","baseUrl","query","filter","url","encodeURI","res","articles","map","LGA","total","useSearch","searching","SetSearching","offences","SetOffence","Serror","setError"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useState, useEffect } from \"react\";\nimport Main from \"./main\";\n// import {setGlobal, useGlobal} from \"react\";\n\n// setGlobal({\n//     jwt: null\n// });\n\nlet jwt = null;\nexport const RegAcc = (emailinput, passcodeinput) => {\n    fetch(\"https://cab230.hackhouse.sh/register\", {\n        method: \"POST\",\n        body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n        headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n    })\n        .then(function (response) {\n            if (response.ok) {\n                return response.json();\n            }\n            throw new Error(\"Network response was not ok\");\n        })\n        .then(function (result) {\n            let queryDiv = document.getElementById(\"query\");\n            queryDiv.innerHTML = JSON.stringify(result);\n            RegAcc.disabled = true;\n\n        })\n        .catch(function (error) {\n            console.log(\n                \"There has been a problem with your fetch operation: \",\n                error.message\n            );\n        });\n}\n\nexport const LoginAcc = (emailinput, passcodeinput) => {\n    // const [jwt, setjwt] = useGlobal();\n    fetch(\"https://cab230.hackhouse.sh/login\", {\n        method: \"POST\",\n        body: \"email=\" + emailinput + \"&password=\" + passcodeinput,\n        headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n        redirect: \"follow\",\n    })\n        .then(function (response) {\n            if (response.ok) {\n                return response.json();\n            }\n            throw new Error(\"Network response was not ok.\");\n        })\n\n        .then(function (result) {\n            let queryDiv = document.getElementById(\"query\");\n            queryDiv.innerHTML = JSON.stringify(result);\n            jwt = result.token;\n            // SetToken(result.token);\n        })\n        .catch(function (error) {\n            console.log(\n                \"There has been a problem with your fetch operation: \",\n                error.message\n            );\n        });\n}\n\nexport function SearchBar(props) {\n\n    const [innerSearch, SetInnerSearch] = useState(\"\");\n\n    return (\n        <div>\n            <input\n                aria-labelledby=\"search-button\"\n                name=\"search\"\n                id=\"search\"\n                type=\"search\"\n                value={innerSearch}\n                onChange={(e) => SetInnerSearch(e.target.value)}\n            />\n            <button id=\"search-button\" type=\"button\" onClick={() => props.onSubmit(innerSearch)}>\n                Search\n            </button>\n        </div>\n    );\n}\n\n\nfunction GetSearchResult(itemsearch) {\n\n    let getParam = { method: \"GET\" };\n    let head = { Authorization: `Bearer ${jwt}` };\n    getParam.headers = head;\n\n    const baseUrl = \"https://cab230.hackhouse.sh/search?\";\n    const query = \"offence=\" + itemsearch;\n    const filter = \"area=Moreton Bay Regional Council\";\n\n    const url = baseUrl + query + \"&\" + filter;\n\n    // const testurl = `https://newsapi.org/v2/top-headlines?country=us&apiKey=9b31b2cc112849a4b433d048f54a15f8&q=${itemsearch}`\n    return fetch(encodeURI(url), getParam)\n    // return fetch(testurl)\n        .then(res => res.json())\n        .then(res => res.articles)\n        .then(articles => articles.map(result => ({\n            LGA: result.LGA,\n            total: result.total\n            // title: result.title,\n            // url: result.url\n          }))\n        );\n\n}\n\nexport function useSearch(itemsearch) {\n    const [searching, SetSearching] = useState(true);\n    const [offences, SetOffence] = useState([]);\n    const [Serror, setError] = useState(null);\n    useEffect(() => {\n        GetSearchResult(itemsearch).then(offences => {\n            SetOffence(offences);\n            SetSearching(false);\n        }).catch((e) => {\n            setError(e);\n            SetSearching(false);\n        });\n    }, [itemsearch]);\n\n    return {\n        searching,\n        offences,\n        Serror,\n    };\n}"]},"metadata":{},"sourceType":"module"}